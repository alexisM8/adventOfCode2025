#include "utils.hpp"
#include <iostream>

auto calculate_joltage(std::string_view str) -> int {
  std::string joltage;
  int max_index = 0;
  int max_num = 0;
  for (auto i = 0; i < str.size() - 1; i++) {
    int val = str.at(i) - '0';
    if (val > max_num) {
      max_num = val;
      max_index = i;
    }
  }
  std::cout << "first num max is: " << max_num << ", at " << max_index << "\n";
  joltage.append(std::to_string(max_num));

  max_num = 0;
  for (auto i = max_index + 1; i < str.size(); i++) {
    int val = str.at(i) - '0';
    if (val > max_num) {
      max_num = val;
      max_index = i;
    }
  }
  joltage.append(std::to_string(max_num));

  std::cout << "second num max is: " << max_num << ", at " << max_index << "\n";
  std::cout << "joltage for bank: " << str << " is " << joltage << "\n";
  return std::stoi(joltage);
}

static constexpr const char *puzzle_input = "DayThree/day_three_example.txt";

int main(int argc, char **argv) {
  using namespace aoc::utils;
  auto contents = read(puzzle_input);
  auto banks = split(contents, "\n");

  auto total = 0;
  for (const auto &bank : banks) {
    total += calculate_joltage(bank);
  }
  std::cout << "total joltage: " << total << "\n";
}
